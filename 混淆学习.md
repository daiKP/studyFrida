#常见混淆方法
1.打乱标识符,删除注释与调试信息
2.数据混淆,改变数据结构(改变变量的可访问性或对数组进行重排|结构化)
3.控制流转换算法的组合,隐藏程序控制流(控制谓语->更复杂的等式(如x(x-1)%2==0)),插入不可达块,或将控制流扁平化.

#代码混淆工具
尽管大多数软件系统由C++编写,但大多数开源或商业混淆工具被用于JAVA代码混淆.
很少工具专门为C++定制,而且他们仅仅使用了微小的布局转换[1].

#控制流扁平化

在实际程序中,由于高级语言的语言结构和编码方式,分支和他的目标很容易被识别出来.因此,通过标记基本块的序号来弄清函数的控制流的难度是线性的.控制流扁平化其背后的思想是让分支的目标难以通过静态分析得出,以此来阻碍逆向分析人员分析程序.

#基础思想
将函数体拆分成一个个基本块,将这些原本连接起来的基本块链接到一个选择块上(C++中的switch表达式),通过switch的参数来控制代码流.

#遇到的困难
将循环(for do while)打成基本块时,不能简单地将循环的头部（for(int i;;)中的i)从主体中分离。如果代码块中含有循环，将导致产生的代码流与源程序不同。
例子：
源代码-
    int i=0;
    int s=0;
    while(i<=100){
        s+=i;
        i++;
    }
拆分后-
    int switchVar=1;
    while(switchVar!=0){
        switch(switchVar){
            case 1:
                i=1;
                s=0;
                switchVar=2;
                break;
            case 2:
                if(i<=100)
                    switchVar=3;
                else
                    switchVar=0;
                break;
            case 3:
                s+=i;
                i++;
                switchVar=2;
                break;
        }
    }


#常量展开
由于上面代码中每个基本块中暴露了switchVar的值，所以分析人员能快速的分析出整个程序流。因此我们需要对更新switchVar的语句进行常量展开。